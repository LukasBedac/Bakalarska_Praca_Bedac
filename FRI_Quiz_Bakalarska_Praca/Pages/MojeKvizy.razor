@page "/mojekvizy"
@using FRI_Quiz_Bakalarska_Praca.Data.Database
@using FRI_Quiz_Bakalarska_Praca.Data.Model
@using Microsoft.EntityFrameworkCore
@inject IDbContextFactory<ApplicationDbContext> DbFactory
<AuthorizeView>
    <Authorized>
        <Accordion>
            @foreach (var quiz in quizzes)
            {
                <Collapse Visible="@collapseVisible">
                    <CollapseHeader>
                        <Heading Size="HeadingSize.Is5">
                            <AccordionToggle>@quiz.QuizName</AccordionToggle>
                            <AccordionToggle Class="disabled"> Pocet bodov: </AccordionToggle>
                        </Heading>
                    </CollapseHeader>
                    <CollapseBody>
                    @foreach (var question in quiz.Questions)
                    {
                            <p>@question.Text</p>
                    }
                    </CollapseBody>
                </Collapse>
            }
    
        </Accordion>
    </Authorized>
    <NotAuthorized>
        <Heading>
            Na zobrazenie vám priradených kvízov sa prosím prihláste.
            <br />
            <a href="/login">Prihlásiť sa</a>
        </Heading>
    </NotAuthorized>
</AuthorizeView>
    <!--
    <Collapse Visible="@collapse2Visible">
        <CollapseHeader>
            <Heading Size="HeadingSize.Is5">
                <AccordionToggle>Kviz 2</AccordionToggle>
                <AccordionToggle Class="disabled"> Pocet bodov: 0/1</AccordionToggle>
            </Heading>
        </CollapseHeader>
        <CollapseBody>
            Otazka 1: What fictional place would you most like to go to?
        </CollapseBody>
    </Collapse>
    <Collapse Visible="@collapse3Visible">
        <CollapseHeader>
            <Heading Size="HeadingSize.Is5">
                <AccordionToggle>VAII kviz prednaska 4</AccordionToggle>
                <AccordionToggle Class="disabled"> Pocet bodov: 2/3</AccordionToggle>
            </Heading>
        </CollapseHeader>
        <CollapseBody>
            1: Naco pouzivame HTML?
            
            
        </CollapseBody>
        
        <CollapseBody>
            
            2: Naco pozuivame CSS?

        </CollapseBody>
        <CollapseBody>

            3: kafanhfouqbfoqnbfiphqwevfouqbdno;qfb vjwkvdilqbk.

        </CollapseBody>
    </Collapse>
    -->


@code {
    bool collapseVisible = false;

    private List<Quiz> quizzes = new List<Quiz>();

    protected override async Task OnInitializedAsync()
    {
        using var dbCOntext = DbFactory.CreateDbContext();

        quizzes = await dbCOntext.Kvizy.ToListAsync();
        await base.OnInitializedAsync();
    }
}